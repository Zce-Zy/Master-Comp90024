(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{264:function(e,t,a){},399:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a(25),c=a.n(r),o=a(45),i=a(117),l=a(215),s=(a(264),a(8)),u=function(){return Object(s.jsx)("header",{children:Object(s.jsx)("span",{children:"Twitter Sentiment Dashboard"})})},d=a(132),j=a(133),h=a(216),v=a(250),f=a(251),b="AIzaSyDZfLuvCy8Ec8FyyBAO60DR4IURGWvLMsA",m=a(109),p=7,y=14,O=[{featureType:"all",elementType:"labels",stylers:[{visibility:"on"}]},{featureType:"all",elementType:"labels.text.fill",stylers:[{saturation:36},{lightness:40}]},{featureType:"all",elementType:"labels.text.stroke",stylers:[{visibility:"on"},{lightness:16}]},{featureType:"all",elementType:"labels.icon",stylers:[{visibility:"off"}]},{featureType:"administrative",elementType:"geometry.fill",stylers:[{lightness:20}]},{featureType:"administrative",elementType:"geometry.stroke",stylers:[{lightness:17},{weight:1.2}]},{featureType:"administrative.neighborhood",elementType:"labels.text.fill",stylers:[{color:"#707070"}]},{featureType:"water",elementType:"geometry",stylers:[{lightness:17}]}];function g(e,t){console.log("In getAddressWithType, address = ".concat(Object(m.inspect)(e),", targetType = ").concat(t));try{return e.results.find((function(e){return e.types.find((function(e){return e===t}))}))}catch(a){return null}}function x(e){return g(e,"administrative_area_level_2")}function w(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=x(e);if(a){var n=a.address_components[0];return t?n.long_name:n.short_name}return""}function A(e){return g(e,"administrative_area_level_1")}function N(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=A(e);if(a){var n=a.address_components[0];return t?n.long_name:n.short_name}return""}function C(e){return N(e,!1)}var T="OVERVIEW_DATA_RECEIVED",_="UPDATE_LOADING_STATUS",D="LGA_DATA_RECEIVED",k="CLEAR_LGA_DATA";function I(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return{type:_,payload:e}}var L=function(){return I(!0)},E=function(){return I()};var S="UPDATE_MAP_CENTER_AND_ZOOM",R="UPDATE_LAST_CLICKED_INFO";function M(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return{type:R,payload:e}}var z=function(e){var t=e.lat,a=e.lng,n=e.x,r=e.y;return function(e){return e(M()),fetch(function(e,t){return"".concat("https://maps.googleapis.com/maps/api/geocode/json?latlng=").concat(e,",").concat(t).concat("&key=").concat(b)}(t,a)).then((function(e){if(e.ok)return e.json();throw e.statusText})).then((function(c){console.log("In reverseGeocoding, address =",c),console.log("In reverseGeocoding, cityName =",x(c)),e(M({lat:t,lng:a,x:n,y:r,address:c}));var o,i=w(c,!1);c&&"VIC"===C(c)?(o=i,function(e){return e(L()),fetch("".concat("/api/Lga_Senti_Overview/").concat(o)).then((function(e){if(e.ok)return e.json();throw e.statusText})).then((function(t){console.log("overviewData =",t),e({type:D,payload:t})})).finally((function(){return e(E())}))})(e):e({type:k})}))}},G=a(219),P=a(220),U=function(e){return Object(s.jsx)(G.a,{icon:P.a,style:{color:"red",fontSize:"1rem"}})},V=function(e){Object(h.a)(a,e);var t=Object(v.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e)).map=void 0,n.maps=void 0,n.dataLayer=void 0,n.handleMapApiLoad=function(e,t){n.map=e,n.maps=t,n.initDataLayer()},n}return Object(j.a)(a,[{key:"initDataLayer",value:function(){console.log("this.map =",this.map),console.log("this.maps =",this.maps),this.maps&&(this.dataLayer=new this.maps.Data({map:this.map}),this.dataLayer.loadGeoJson("https://data.gov.au/geoserver/vic-local-government-areas-psma-administrative-boundaries/wfs?request=GetFeature&typeName=ckan_bdf92691_c6fe_42b9_a0e2_a4cd716fa811&outputFormat=json"))}},{key:"render",value:function(){var e=this,t=this.props,a=t.center,n=t.zoom,r=t.showMarker,c=t.lastClickedInfo,o=t.updateMapCenterAndZoom,i=t.getTheLocationInfo;return Object(s.jsx)("div",{id:"map-container",children:Object(s.jsx)(f.a,{yesIWantToUseGoogleMapApiInternals:!0,bootstrapURLKeys:{key:b},defaultCenter:a,defaultZoom:n,options:{gestureHandling:"greedy",zoomControl:!0,fullscreenControl:!1,maxZoom:y,minZoom:p,styles:O},onChange:function(e){var t=e.zoom,a=e.center;console.log("onChange trigerred, zoom = ".concat(t,", center = ").concat(Object(m.inspect)(a))),o(a,t)},onClick:i,onGoogleApiLoaded:function(t){var a=t.map,n=t.maps;return e.handleMapApiLoad(a,n)},children:r&&Object(s.jsx)(U,{lat:c.lat,lng:c.lng})})})}}]),a}(n.Component),F=Object(o.b)((function(e){var t,a=e.map,n=a.center,r=a.zoom,c=a.lastClickedInfo;return{center:n,zoom:r,showMarker:null!==(t=c&&"VIC"===C(c.address))&&void 0!==t&&t,lastClickedInfo:c}}),(function(e){return{updateMapCenterAndZoom:function(t,a){return e(function(e,t){return{type:S,payload:{center:e,zoom:t}}}(t,a))},getTheLocationInfo:function(t){return z(t)(e)}}}))(V),K=a(104),Z=a(54),q=a(31),Q=a(408),W=a(110),B=a(404),J=a(412),Y=a(237),H=a(142),X=function(e,t,a,n){return e=a&&t&&n&&"VIC"===n.toUpperCase()?"".concat(e," - ").concat(a,", ").concat(t):"".concat(e," - Victoria")},$=new Map([["Negative","#a52a2a"],["Positive","#11c299"],["Neutral","#ffbf00"]]),ee=function(e){var t,a=Math.PI/180,n=e.cx,r=e.cy,c=e.midAngle,o=e.innerRadius,i=e.outerRadius,l=e.startAngle,u=e.endAngle,d=e.fill,j=e.payload,h=e.percent,v=Math.sin(-a*c),f=Math.cos(-a*c),b=n+(i+10)*f,m=r+(i+10)*v,p=n+(i+30)*f,y=r+(i+30)*v,O=p+22*(f>=0?1:-1),g=y,x=f>=0?"start":"end";return Object(s.jsxs)("g",{children:[Object(s.jsx)(W.a,{cx:n,cy:r,innerRadius:o,outerRadius:i,startAngle:l,endAngle:u,fill:d}),Object(s.jsx)(W.a,{cx:n,cy:r,startAngle:l,endAngle:u,innerRadius:i+6,outerRadius:i+10,fill:d}),Object(s.jsx)("path",{d:"M".concat(b,",").concat(m,"L").concat(p,",").concat(y,"L").concat(O,",").concat(g),stroke:d,fill:"none"}),Object(s.jsx)("circle",{cx:O,cy:g,r:2,fill:d,stroke:"none"}),Object(s.jsx)("text",{x:O+12*(f>=0?1:-1),y:g,textAnchor:x,fill:d,children:j.name}),Object(s.jsx)("text",{x:O+12*(f>=0?1:-1),y:g,dy:20,textAnchor:x,fill:"#333",children:"Count: ".concat(j.value)}),Object(s.jsx)("text",{x:O+12*(f>=0?1:-1),y:g,dy:40,textAnchor:x,fill:"#333",children:"".concat(null===(t=100*h)||void 0===t?void 0:t.toFixed(2),"%")})]})},te=Object(o.b)((function(e){var t,a,n,r,c,o,i=null!==(t=null===(a=e.xhr)||void 0===a||null===(n=a.lgaData)||void 0===n?void 0:n.sentiment)&&void 0!==t?t:null;i||(i=null!==(r=null===(c=e.xhr)||void 0===c||null===(o=c.overview)||void 0===o?void 0:o.sentiment)&&void 0!==r?r:null);var l=e.map.lastClickedInfo,s="",u="",d="";if(l&&l.address){var j=l.address;s=w(j),u=N(j),d=C(j)}return{sentiment:i,cityName:s,stateName:u,stateShortName:d}}))((function(e){var t=e.cityName,a=e.stateName,r=e.sentiment,c=e.stateShortName,o=Object(n.useState)(0),i=Object(q.a)(o,2),l=i[0],u=i[1],d=X("Tweet Sentiment Data",a,t,c);if(!r||!Object.keys(r).length)return Object(s.jsx)(Q.a,{hoverable:!0,className:"col-6 tweet-card xhr-data-card",title:d,children:Object(s.jsx)("div",{className:"empty-data-cover",children:Object(s.jsx)("h2",{children:"Oops, there are no Tweet sentiment data available..."})})});var j=[],h=0;for(var v in r){var f=v.split(" ").map((function(e){return e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()})).join(" ");if(console.log("name = ".concat(f)),$.has(f)){var b=r[v];j.push({name:f,value:b}),h+=b}}return Object(s.jsxs)(Q.a,{hoverable:!0,className:"col-6 tweet-card xhr-data-card",title:d,children:[Object(s.jsx)("div",{className:"data-presentation",children:Object(s.jsxs)("p",{children:[Object(s.jsx)("span",{children:Object(s.jsx)("b",{children:"Number of tweets analysed: "})}),h]})}),Object(s.jsx)(B.a,{height:"100%",width:"70%",children:Object(s.jsx)(J.a,{width:550,height:150,margin:{left:50,right:50},children:Object(s.jsx)(Y.a,{data:j,dataKey:"value",startAngle:90,endAngle:-270,outerRadius:100,activeIndex:l,activeShape:ee,isAnimationActive:!1,onMouseEnter:function(e,t){return u(t)},children:j.map((function(e,t){return Object(s.jsx)(H.a,{fill:e?$.get(e.name):""},"slice-".concat(t))}))})})}),!Object.keys(r).length&&Object(s.jsx)("div",{className:"empty-data-cover",children:Object(s.jsx)("h2",{children:"Oops, there are no Tweet sentiment data available..."})})]})})),ae=a(405),ne=a(406),re=a(144),ce=a(145),oe=a(122),ie=a(245),le=a(409),se="totalCount",ue="ratePer100000population",de=new Map([[se,{label:"Total Count",color:"#318ce7"}],[ue,{label:"Rate Per 100000 Population",color:"#008000"}]]),je=le.a.Option,he=function(e){var t=e.handleChange;return Object(s.jsxs)("div",{className:"visualisation-selector",children:[Object(s.jsx)("span",{children:"Data Type: "}),Object(s.jsxs)(le.a,{defaultValue:se,style:{width:250},onChange:t,children:[Object(s.jsx)(je,{value:se,children:de.get(se).label}),Object(s.jsx)(je,{value:ue,children:de.get(ue).label})]})]})},ve=Object(o.b)((function(e){var t,a,n,r,c,o,i=e.map.lastClickedInfo,l=null!==(t=null===(a=e.xhr)||void 0===a||null===(n=a.lgaData)||void 0===n?void 0:n.crimeRates)&&void 0!==t?t:[];l.length||(l=null!==(r=null===(c=e.xhr)||void 0===c||null===(o=c.overview)||void 0===o?void 0:o.crimeRates)&&void 0!==r?r:[]);var s="",u="",d="";if(i&&i.address){var j=i.address;s=w(j),u=N(j),d=C(j)}return{cityName:s,stateName:u,data:l.sort((function(e,t){return e.year-t.year})),stateShortName:d}}))((function(e){var t=e.cityName,a=e.stateName,r=e.stateShortName,c=e.data,o=X("Crime Rates from 2011 to 2020",a,t,r),i=Object(n.useState)(se),l=Object(q.a)(i,2),u=l[0],d=l[1];return Object(s.jsxs)(Q.a,{hoverable:!0,className:"col-6 crime-rate-card",title:o,children:[Object(s.jsxs)("div",{className:"visualisation-container",children:[Object(s.jsx)(he,{handleChange:d}),Object(s.jsx)(B.a,{children:Object(s.jsxs)(ae.a,{data:c,width:730,height:220,margin:{top:5,right:10,left:10,bottom:5},children:[Object(s.jsx)(ne.a,{strokeDasharray:"3 3"}),Object(s.jsx)(re.a,{dataKey:"year"}),Object(s.jsx)(ce.a,{type:"number"}),Object(s.jsx)(oe.a,{formatter:function(e,t){return[e,de.get(u).label]}}),Object(s.jsx)(ie.a,{type:"monotone",dataKey:u,stroke:de.get(u).color,animationDuration:4e3})]})})]}),0===c.length&&Object(s.jsx)("div",{className:"empty-data-cover",children:Object(s.jsx)("h2",{children:"Oops, there are no data available..."})})]})})),fe=a(407),be=a(246),me="all",pe=new Map([[1,"#FF5666"],[2,"#FCB07E"],[3,"#EBE9E9"],[4,"#2E5339"]]),ye=new Map([[1,"Summer"],[2,"Autumn"],[3,"Winter"],[4,"Spring"]]),Oe=le.a.Option,ge=function(e){var t=e.years,a=e.handleChange,n=t.sort((function(e,t){return t-e}));return Object(s.jsxs)("div",{className:"visualisation-selector",children:[Object(s.jsx)("span",{children:"Year: "}),Object(s.jsxs)(le.a,{defaultValue:me,style:{width:250},onChange:a,children:[Object(s.jsx)(Oe,{value:me,children:"All Years"}),n.map((function(e){return Object(s.jsx)(Oe,{value:"".concat(e),children:e},e)}))]})]})},xe=function(e){var t=ye.get(e);switch(e){case 1:return"1st Quarter (".concat(t,")");case 2:return"2nd Quarter (".concat(t,")");case 3:return"3rd Quarter (".concat(t,")");default:return"4th Quarter (".concat(t,")")}},we=function(e,t){return{quarter:t,rate:function(e,t){var a=e.filter((function(e){return e.quarter===t})).map((function(e){return e.rate}));return a.reduce((function(e,t){return e+t}),0)/a.length||0}(e,t)}},Ae=Object(o.b)((function(e){var t,a,n,r,c,o,i=e.map.lastClickedInfo,l=null!==(t=null===(a=e.xhr)||void 0===a||null===(n=a.lgaData)||void 0===n?void 0:n.unemploymentRates)&&void 0!==t?t:[];l.length||(l=null!==(r=null===(c=e.xhr)||void 0===c||null===(o=c.overview)||void 0===o?void 0:o.unemploymentRates)&&void 0!==r?r:[]);var s="",u="",d="";if(i&&i.address){var j=i.address;s=w(j),u=N(j),d=C(j)}return{cityName:s,stateName:u,data:l.sort((function(e,t){return e.year-t.year})),stateShortName:d}}))((function(e){var t,a=e.cityName,r=e.stateName,c=e.stateShortName,o=e.data,i=Object(n.useState)(me),l=Object(q.a)(i,2),u=l[0],d=l[1],j=Array.from(new Set(o.map((function(e){return e.year})))),h="Unemployment Rates Per Quarter"+(u===me?" from 2011 - 2020":" in ".concat(u));if(h=X(h,r,a,c),u===me){var v=o.map((function(e){return e.data}));t=[we(v,1),we(v,2),we(v,3),we(v,4)]}else t=o.filter((function(e){return"".concat(e.year)===u})).map((function(e){return e.data}));return Object(s.jsxs)(Q.a,{hoverable:!0,className:"col-6",title:h,children:[Object(s.jsxs)("div",{className:"visualisation-container",children:[Object(s.jsx)(ge,{years:j,handleChange:d}),Object(s.jsx)(B.a,{children:Object(s.jsxs)(fe.a,{width:700,height:250,data:t,layout:"vertical",children:[Object(s.jsx)(ne.a,{strokeDasharray:"3 3"}),Object(s.jsx)(re.a,{type:"number"}),Object(s.jsx)(ce.a,{dataKey:"quarter",type:"category",width:80}),Object(s.jsx)(oe.a,{formatter:function(e,t,a){return[null===e||void 0===e?void 0:e.toFixed(2),xe(a.payload.quarter)]}}),Object(s.jsx)(be.a,{dataKey:"rate",barSize:40,animationDuration:4e3,name:"Number",children:t.map((function(e,t){return Object(s.jsx)(H.a,{fill:pe.get(e.quarter)},"cell-".concat(t))}))})]})})]}),0===o.length&&Object(s.jsx)("div",{className:"empty-data-cover",children:Object(s.jsx)("h2",{children:"Oops, there are no data available..."})})]})})),Ne=function(){return Object(s.jsx)("section",{id:"visualisation",children:Object(s.jsxs)(K.a,{children:[Object(s.jsx)(Z.a,{span:12,children:Object(s.jsx)(te,{})}),Object(s.jsx)(Z.a,{span:12,children:Object(s.jsx)(ve,{})}),Object(s.jsx)(Z.a,{span:12,children:Object(s.jsx)(Ae,{})})]})})},Ce=a(413),Te=function(){return Object(s.jsx)("div",{className:"spinner-container",children:Object(s.jsx)(Ce.a,{size:"large"})})},_e=Object(o.b)((function(e){return{isLoading:e.loading.isLoading}}),(function(e){return{getOverviewData:function(){!function(e){e(L()),fetch("/api/Lga_Senti_Overview").then((function(e){if(e.ok)return e.json();throw e.statusText})).then((function(t){console.log("overviewData =",t),e({type:T,payload:t})})).finally((function(){return e(E())}))}(e)}}}))((function(e){var t=e.isLoading,a=e.getOverviewData;return Object(n.useEffect)((function(){a()}),[a]),Object(s.jsxs)("div",{className:"App",children:[t&&Object(s.jsx)(Te,{}),Object(s.jsx)(u,{}),Object(s.jsx)(F,{}),Object(s.jsx)(Ne,{})]})})),De=a(40),ke={center:{lng:145.3327648384119,lat:-36.45378603127134},zoom:7,lastClickedInfo:null},Ie={tweetCount:0,overview:null,lgaData:null};var Le={isLoading:!1};var Ee=Object(i.b)({map:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ke,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case S:return Object(De.a)(Object(De.a)({},e),t.payload);case R:return Object(De.a)(Object(De.a)({},e),{},{lastClickedInfo:t.payload});default:return e}},xhr:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ie,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case T:return Object(De.a)(Object(De.a)({},e),{},{overview:t.payload});case D:return Object(De.a)(Object(De.a)({},e),{},{lgaData:t.payload});case k:return Object(De.a)(Object(De.a)({},e),{},{lgaData:null});default:return e}},loading:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Le,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case _:return Object(De.a)(Object(De.a)({},e),t.payload);default:return e}}}),Se=Object(i.c)(Ee,{},Object(i.a)(l.a));c.a.render(Object(s.jsx)(o.a,{store:Se,children:Object(s.jsx)(_e,{})}),document.getElementById("root"))}},[[399,1,2]]]);
//# sourceMappingURL=main.2f192604.chunk.js.map